---
import '../../styles/variables.css';

// Proposal data registry — add new proposals here
const proposals: Record<string, { password: string; data: any }> = {
  'imm-feb2026': {
    password: 'imm2026',
    data: {
      client: 'IMM',
      date: 'February 2026',
      slides: [
        {
          type: 'title',
          headline: 'Happy Operators \u00d7 IMM',
          subtitle: 'Working Together on Content Factory & Beyond',
        },
        {
          type: 'text',
          label: 'WHO WE ARE',
          headline: "We\u2019re practitioners,\nnot consultants.",
          body: "Before we helped anyone else, we built our own AI-powered operations system \u2014 a Co-CEO that runs our daily briefings, processes our inbox, prepares for meetings, drafts follow-ups, manages our CRM, and publishes content.\n\nWe use AI to run our business every single day. That means when we work with you, we\u2019re not reading from a playbook. We\u2019re sharing what actually works.",
          note: 'Matt & Rafa \u2014 Co-founders, Happy Operators',
        },
        {
          type: 'image',
          image: { src: '/images/workshops/hero.jpg', alt: 'Happy Operators workshop session' },
          caption: 'Workshop in action',
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'JamesEdition',
          subtitle: 'Luxury Marketplace',
          metric: { value: '250+', label: 'hours saved annually' },
          body: '4-hour workshop with leadership, followed by 7 hours of hands-on troubleshooting. Automated 6 internal systems including email classification, client feature requests, and a knowledge bot.',
          quote: { text: 'Those who run it, fix it best.', author: 'Eric Finnas', role: 'CEO, JamesEdition' },
          avatar: { src: '/images/case-study/eric-finnas.png', alt: 'Eric Finnas' },
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'IMM \u2014 Phase 1',
          subtitle: 'Content Factory',
          metric: { value: '20+', label: 'hours/week saved' },
          body: 'Built an AI-powered Content Factory that maps client context into advertising campaigns across Meta, PMAX, and video formats. Produces multiple ad variations in minutes instead of hours.',
          quote: { text: 'The system completely changed how we approach content creation for our clients.', author: 'Mariah Kamei', role: 'Director of Strategy, IMM' },
          avatar: { src: '/images/avatars/mariah.jpeg', alt: 'Mariah Kamei' },
          screenshots: [
            { src: '/images/projects/imm/hero.png', alt: 'Content Factory dashboard' },
          ],
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'Sidekick Studios',
          subtitle: 'Creative Agency',
          metric: { value: '5\u00d7', label: 'faster context-switching' },
          body: 'Built a tone of voice tool that manages client brand voice across a 5-person creative team. Combined with AI training and custom GPTs to reduce context-switching from hours to minutes.',
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'Traction Events',
          subtitle: 'Events Agency',
          metric: { value: '2\u00d7', label: 'team capacity' },
          body: 'SOP-based custom GPTs that let any team member perform tasks outside their role. Sales independently handles marketing deliverables when the team is at capacity.',
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'WYK Digital',
          subtitle: 'Digital Consultancy',
          metric: { value: '3\u00d7', label: 'faster analysis' },
          body: 'Built a ChatGPT-to-Zapier agent for individual analysis workflows and a LinkedIn scraper to track participant history and progression. Result: 3\u00d7 faster analysis, 2\u00d7 more data captured.',
        },
        {
          type: 'case-study',
          label: 'RESULTS',
          headline: 'Salience',
          subtitle: 'B2B Marketing Agency',
          metric: { value: '260+', label: 'hours saved per year' },
          body: 'Team members built their own AI agents: a Reddit Mentions Agent surfacing relevant conversations for B2B clients (104 hrs/yr saved), and an SEO JSON automation generating metadata for content pipelines (156 hrs/yr saved).',
        },
        {
          type: 'logo-wall',
          label: 'OUR CLIENTS',
          headline: 'Who we\u2019ve worked with',
          logos: [
            { src: '/images/case-study/jamesedition-logo.png', alt: 'JamesEdition' },
            { src: '/images/projects/logos/imm.svg', alt: 'IMM' },
          ],
        },
        {
          type: 'comparison',
          label: 'HOW WE WORK',
          headline: 'Three ways to engage.',
          columns: [
            {
              title: 'Workshop',
              price: '\u20ac1,500 \u2013 \u20ac2,500',
              features: [
                '2-hour facilitated session',
                'Pre-session research & prep',
                'Business canvas report',
                'AI opportunity mapping',
                'Best for: exploring & buy-in',
              ],
              recommended: false,
            },
            {
              title: 'Project-Based',
              price: '\u20ac125 \u2013 \u20ac150/hr',
              features: [
                'Scoped per iteration',
                'Defined deliverables',
                'You brief, we build',
                'Self-contained sprints',
                'Best for: specific builds',
              ],
              recommended: false,
            },
            {
              title: 'Managed Partnership',
              price: '\u20ac5,000 \u2013 \u20ac8,000/mo',
              features: [
                'Minimum 3 months',
                'Ongoing development',
                'Workshops included',
                'Mini products & automations',
                'Best for: sustained progress',
              ],
              recommended: true,
            },
          ],
        },
        {
          type: 'features',
          label: "WHAT WE'D DO FOR IMM",
          headline: '1. Platform Transfer',
          bullets: [
            'Full codebase transferred to your GitHub',
            'Happy Operators added as collaborators',
            'New Supabase account with data migrated',
            'Vercel deployment configured and tested',
            'Handover documentation included',
          ],
          note: 'Included in Phase 1 \u2014 no additional charge',
        },
        {
          type: 'features',
          label: "WHAT WE'D DO FOR IMM",
          headline: '2. UX Updates',
          bullets: [
            'IMM provides design recommendations & briefs',
            'Happy Operators handles all development',
            'Iterative: design review \u2192 dev \u2192 feedback \u2192 refinement',
            'Deployed directly to your Vercel environment',
          ],
          note: '\u20ac1,500 \u2013 \u20ac3,000 per iteration',
        },
        {
          type: 'features',
          label: "WHAT WE'D DO FOR IMM",
          headline: '3. Workshop',
          backgroundImage: '/images/workshops/discovery.jpg',
          bullets: [
            'Pre-session preparation & research',
            '2-hour facilitated session (in-person or remote)',
            'Problem identification & AI opportunity mapping',
            'Idea generation with your team',
            'Post-session business canvas report',
          ],
          note: '\u20ac1,500 \u2013 \u20ac2,500',
        },
        {
          type: 'features',
          label: "WHAT WE'D DO FOR IMM",
          headline: '4. Content Factory Phase 2',
          body: 'Expand beyond advertising into B2B content production.',
          bullets: [
            'Blog/SEO Content Workflow \u2014 keyword research, two-stage generation, CTA placement',
            'Email Sequence Workflow \u2014 7-touch sequences, merge tags, A/B variants',
            'Sales Sheet Generator \u2014 one-page output from product inputs, ICP targeting',
            'eBook Generator (optional) \u2014 chapter architecture, 2,500\u20134,000 words, pull-quotes',
          ],
        },
        {
          type: 'pricing',
          label: 'INVESTMENT',
          headline: 'Option A: Content Workflows',
          subtitle: 'Project-based pricing',
          table: {
            headers: ['', 'Low', 'High'],
            rows: [
              ['Platform Transfer', 'Included', 'Included'],
              ['Blog/SEO Workflow', '\u20ac3,000', '\u20ac4,000'],
              ['Email Sequence', '\u20ac2,500', '\u20ac3,500'],
              ['Sales Sheet', '\u20ac2,000', '\u20ac3,000'],
              ['eBook (optional)', '\u20ac4,000', '\u20ac5,500'],
              ['Total (without eBook)', '\u20ac7,500', '\u20ac10,500'],
              ['Total (with eBook)', '\u20ac11,500', '\u20ac16,000'],
            ],
            highlightLast: true,
          },
          note: 'UX updates scoped separately: \u20ac1,500 \u2013 \u20ac3,000 per iteration',
        },
        {
          type: 'pricing',
          label: 'INVESTMENT',
          headline: 'Option B: Managed Partnership',
          subtitle: 'Recommended',
          table: {
            headers: ['', '', ''],
            rows: [
              ['Monthly rate', '\u20ac5,000', '\u20ac8,000'],
              ['Minimum commitment', '3 months', '3 months'],
              ['3-month investment', '\u20ac15,000', '\u20ac24,000'],
            ],
            highlightLast: true,
          },
          bullets: [
            'Content Factory v2 development',
            'Workshops with your team (1\u20132 per quarter)',
            'UX updates as they come up',
            'Mini products & automations',
            'Strategic AI advisory',
          ],
          note: 'Infrastructure (~\u20ac20\u2013100/mo) and API costs are separate \u2014 client manages own keys',
        },
        {
          type: 'cta',
          label: 'NEXT STEPS',
          headline: "Let\u2019s Talk",
          body: "We recommend starting with a Managed Partnership at a level that works for both sides. This gives us the flexibility to tackle Content Factory v2, UX updates, and workshops without the overhead of scoping each piece individually.\n\nIf you prefer to start smaller, Blog/SEO + Email Sequence as a project covers 80% of your immediate content needs.",
          cta: { text: 'Book a Call', email: 'matt@happyoperators.com', url: 'https://cal.com/happyoperators' },
          note: 'Prepared by Happy Operators \u00b7 February 2026',
        },
      ],
    },
  },
};

export function getStaticPaths() {
  return [
    { params: { slug: 'imm-feb2026' } },
  ];
}

const { slug } = Astro.params;
const proposal = proposals[slug as string];
const proposalData = proposal ? JSON.stringify(proposal) : 'null';
---

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>{proposal ? `Proposal \u2014 ${proposal.data.client}` : 'Proposal'} | Happy Operators</title>
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon" type="image/png" href="/favicon.png" />

  <!-- Fonts -->
  <style>
    @import '@fontsource/geist-mono/400.css';
    @import '@fontsource/geist-mono/500.css';
    @import '@fontsource/geist-mono/600.css';
    @import '@fontsource/crimson-pro/400.css';
    @import '@fontsource/crimson-pro/500.css';
    @import '@fontsource/crimson-pro/600.css';
    @import '@fontsource/crimson-pro/400-italic.css';
  </style>
</head>
<body>
  <div id="app"></div>

  <script is:inline define:vars={{ proposalData }}>
    const proposal = JSON.parse(proposalData);

    // ──────────────────────────────────────────
    // PASSWORD GATE
    // ──────────────────────────────────────────

    function checkAccess() {
      if (!proposal) { renderNotFound(); return; }
      const params = new URLSearchParams(window.location.search);
      const urlKey = params.get('key');
      const stored = sessionStorage.getItem('proposal_unlocked_' + window.location.pathname);
      if (urlKey === proposal.password || stored === 'true') {
        sessionStorage.setItem('proposal_unlocked_' + window.location.pathname, 'true');
        // Clean URL if key was in params
        if (urlKey) {
          const clean = window.location.pathname;
          window.history.replaceState({}, '', clean);
        }
        renderDeck();
      } else {
        renderGate();
      }
    }

    function renderNotFound() {
      document.getElementById('app').innerHTML = `
        <div class="gate">
          <div class="gate__inner">
            <div class="gate__wordmark">Happy Operators</div>
            <h1 class="gate__title">Proposal not found</h1>
            <p class="gate__sub">This link may have expired or the URL is incorrect.</p>
            <a href="https://happyoperators.com" class="gate__link">happyoperators.com</a>
          </div>
        </div>
      `;
    }

    function renderGate() {
      document.getElementById('app').innerHTML = `
        <div class="gate">
          <div class="gate__grain"></div>
          <div class="gate__inner">
            <div class="gate__wordmark">Happy Operators</div>
            <div class="gate__lock">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
            </div>
            <h1 class="gate__title">Proposal for ${proposal.data.client}</h1>
            <p class="gate__sub">Enter the access key to view this proposal.</p>
            <form class="gate__form" onsubmit="handleGateSubmit(event)">
              <input
                type="password"
                id="gate-input"
                class="gate__input"
                placeholder="Access key"
                autocomplete="off"
                autofocus
              />
              <button type="submit" class="gate__btn">View Proposal</button>
            </form>
            <div id="gate-error" class="gate__error"></div>
          </div>
          <div class="gate__footer">
            <span class="gate__footer-dot"></span>
            <span>Prepared ${proposal.data.date}</span>
          </div>
        </div>
      `;
      document.getElementById('gate-input').focus();
    }

    window.handleGateSubmit = function(e) {
      e.preventDefault();
      const val = document.getElementById('gate-input').value;
      if (val === proposal.password) {
        sessionStorage.setItem('proposal_unlocked_' + window.location.pathname, 'true');
        renderDeck();
      } else {
        const err = document.getElementById('gate-error');
        err.textContent = 'Incorrect key. Try again.';
        err.classList.add('gate__error--visible');
        document.getElementById('gate-input').value = '';
        document.getElementById('gate-input').focus();
      }
    };

    // ──────────────────────────────────────────
    // SLIDE DECK RENDERER
    // ──────────────────────────────────────────

    function renderDeck() {
      const slides = proposal.data.slides;
      const total = slides.length;

      let html = `
        <div class="deck" id="deck">
          <div class="deck__grain"></div>
          <div class="deck__watermark">Happy Operators</div>
          <div class="deck__progress">
            <div class="deck__progress-bar" id="progress-bar"></div>
          </div>
          <div class="deck__counter" id="slide-counter">
            <span id="counter-current">1</span><span class="deck__counter-sep">/</span><span id="counter-total">${total}</span>
          </div>
          <nav class="deck__dots" id="dots">
            ${slides.map((_, i) => `<button class="deck__dot${i === 0 ? ' deck__dot--active' : ''}" data-index="${i}" aria-label="Go to slide ${i + 1}"></button>`).join('')}
          </nav>
          <div class="deck__slides" id="slides-container">
            ${slides.map((s, i) => renderSlide(s, i)).join('')}
          </div>
          <button class="deck__nav deck__nav--prev" id="nav-prev" aria-label="Previous slide">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          <button class="deck__nav deck__nav--next" id="nav-next" aria-label="Next slide">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
          </button>
        </div>
      `;

      document.getElementById('app').innerHTML = html;
      initDeck(total);
    }

    function renderSlide(slide, index) {
      const cls = `deck__slide deck__slide--${slide.type}${slide.backgroundImage ? ' deck__slide--has-bg' : ''}`;
      const vis = index === 0 ? 'deck__slide--active' : '';
      const bgLayer = slide.backgroundImage ? `<div class="slide__bg" style="background-image: url('${slide.backgroundImage}')"></div><div class="slide__bg-overlay"></div>` : '';

      switch (slide.type) {
        case 'title':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content slide__content--center">
                <h1 class="slide__hero-title">${slide.headline}</h1>
                ${slide.subtitle ? `<p class="slide__hero-sub">${slide.subtitle}</p>` : ''}
                <div class="slide__hero-line"></div>
              </div>
            </section>`;

        case 'image':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__image-bg" style="background-image: url('${slide.image.src}')"></div>
              <div class="slide__image-overlay"></div>
              ${slide.caption ? `<p class="slide__image-caption">${slide.caption}</p>` : ''}
            </section>`;

        case 'text':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__title">${slide.headline}</h2>
                ${slide.body ? slide.body.split('\n\n').map(p => `<p class="slide__body">${p}</p>`).join('') : ''}
                ${slide.note ? `<p class="slide__note">${slide.note}</p>` : ''}
              </div>
            </section>`;

        case 'case-study':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <div class="slide__cs-header">
                  <div class="slide__cs-info">
                    <h2 class="slide__title">${slide.headline}</h2>
                    ${slide.subtitle ? `<p class="slide__subtitle">${slide.subtitle}</p>` : ''}
                  </div>
                  ${slide.metric ? `
                  <div class="slide__metric">
                    <span class="slide__metric-value">${slide.metric.value}</span>
                    <span class="slide__metric-label">${slide.metric.label}</span>
                  </div>` : ''}
                </div>
                ${slide.body ? `<p class="slide__body">${slide.body}</p>` : ''}
                ${slide.screenshots && slide.screenshots.length ? `
                <div class="slide__screenshots">
                  ${slide.screenshots.map(s => `<img class="slide__screenshot" src="${s.src}" alt="${s.alt}" loading="lazy" />`).join('')}
                </div>` : ''}
                ${slide.quote ? `
                <blockquote class="slide__quote">
                  <p class="slide__quote-text">\u201c${slide.quote.text}\u201d</p>
                  <footer class="slide__quote-attr">
                    ${slide.avatar ? `<img class="slide__avatar" src="${slide.avatar.src}" alt="${slide.avatar.alt}" loading="lazy" />` : ''}
                    <div class="slide__quote-attr-text">
                      <span class="slide__quote-author">${slide.quote.author}</span>
                      <span class="slide__quote-role">${slide.quote.role}</span>
                    </div>
                  </footer>
                </blockquote>` : ''}
              </div>
            </section>`;

        case 'logo-wall':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content slide__content--center">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__title">${slide.headline}</h2>
                <div class="slide__logo-grid">
                  ${slide.logos.map(l => `
                    <div class="slide__logo-item">
                      <img src="${l.src}" alt="${l.alt}" loading="lazy" />
                    </div>
                  `).join('')}
                </div>
              </div>
            </section>`;

        case 'features':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              ${bgLayer}
              <div class="slide__content">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__title">${slide.headline}</h2>
                ${slide.body ? `<p class="slide__body">${slide.body}</p>` : ''}
                ${slide.bullets ? `
                <ul class="slide__bullets">
                  ${slide.bullets.map(b => `<li class="slide__bullet"><span class="slide__bullet-marker"></span>${b}</li>`).join('')}
                </ul>` : ''}
                ${slide.note ? `<p class="slide__note slide__note--accent">${slide.note}</p>` : ''}
              </div>
            </section>`;

        case 'pricing':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__title">${slide.headline}</h2>
                ${slide.subtitle ? `<p class="slide__subtitle slide__subtitle--badge">${slide.subtitle}</p>` : ''}
                ${slide.table ? `
                <div class="slide__table-wrap">
                  <table class="slide__table">
                    ${slide.table.rows.map((row, ri) => {
                      const isLast = ri >= slide.table.rows.length - 2 && slide.table.highlightLast;
                      return `<tr class="${isLast ? 'slide__table-row--highlight' : ''}">
                        ${row.map((cell, ci) => `<td class="slide__table-cell ${ci === 0 ? 'slide__table-cell--label' : 'slide__table-cell--value'}">${cell}</td>`).join('')}
                      </tr>`;
                    }).join('')}
                  </table>
                </div>` : ''}
                ${slide.bullets ? `
                <ul class="slide__bullets slide__bullets--compact">
                  ${slide.bullets.map(b => `<li class="slide__bullet"><span class="slide__bullet-marker"></span>${b}</li>`).join('')}
                </ul>` : ''}
                ${slide.note ? `<p class="slide__note">${slide.note}</p>` : ''}
              </div>
            </section>`;

        case 'comparison':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__title">${slide.headline}</h2>
                <div class="slide__columns">
                  ${slide.columns.map(col => `
                    <div class="slide__column ${col.recommended ? 'slide__column--rec' : ''}">
                      ${col.recommended ? '<span class="slide__column-badge">Recommended</span>' : ''}
                      <h3 class="slide__column-title">${col.title}</h3>
                      <p class="slide__column-price">${col.price}</p>
                      <ul class="slide__column-features">
                        ${col.features.map(f => `<li>${f}</li>`).join('')}
                      </ul>
                    </div>
                  `).join('')}
                </div>
              </div>
            </section>`;

        case 'cta':
          return `
            <section class="${cls} ${vis}" data-index="${index}">
              <div class="slide__content slide__content--center">
                ${slide.label ? `<span class="slide__label">[${slide.label}]</span>` : ''}
                <h2 class="slide__cta-title">${slide.headline}</h2>
                ${slide.body ? slide.body.split('\n\n').map(p => `<p class="slide__body">${p}</p>`).join('') : ''}
                ${slide.cta ? `
                <div class="slide__cta-actions">
                  <a href="${slide.cta.url}" target="_blank" rel="noopener" class="slide__cta-btn">${slide.cta.text}</a>
                  <a href="mailto:${slide.cta.email}" class="slide__cta-email">${slide.cta.email}</a>
                </div>` : ''}
                ${slide.note ? `<p class="slide__note">${slide.note}</p>` : ''}
              </div>
            </section>`;

        default:
          return '';
      }
    }

    // ──────────────────────────────────────────
    // DECK NAVIGATION
    // ──────────────────────────────────────────

    function initDeck(total) {
      let current = 0;
      let transitioning = false;
      const isMobile = window.matchMedia('(max-width: 768px)').matches;
      const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

      const slides = document.querySelectorAll('.deck__slide');
      const dots = document.querySelectorAll('.deck__dot');
      const bar = document.getElementById('progress-bar');
      const counterCurrent = document.getElementById('counter-current');
      const prevBtn = document.getElementById('nav-prev');
      const nextBtn = document.getElementById('nav-next');
      const deck = document.getElementById('deck');

      function goTo(index, direction) {
        if (transitioning || index === current || index < 0 || index >= total) return;
        transitioning = true;

        const leaving = slides[current];
        const entering = slides[index];
        const dir = direction || (index > current ? 1 : -1);

        // Exit current
        leaving.classList.add(dir > 0 ? 'deck__slide--exit-left' : 'deck__slide--exit-right');
        leaving.classList.remove('deck__slide--active');

        // Enter new — reset scroll position
        entering.scrollTop = 0;
        entering.classList.add(dir > 0 ? 'deck__slide--enter-right' : 'deck__slide--enter-left');
        entering.classList.add('deck__slide--active');

        // Trigger reflow for animation
        void entering.offsetWidth;
        entering.classList.remove('deck__slide--enter-right', 'deck__slide--enter-left');

        // Update state
        current = index;
        updateUI();

        setTimeout(() => {
          leaving.classList.remove('deck__slide--exit-left', 'deck__slide--exit-right');
          transitioning = false;
        }, 600);
      }

      function updateUI() {
        dots.forEach((d, i) => d.classList.toggle('deck__dot--active', i === current));
        bar.style.width = ((current + 1) / total * 100) + '%';
        counterCurrent.textContent = current + 1;
        prevBtn.style.opacity = current === 0 ? '0.2' : '1';
        prevBtn.style.pointerEvents = current === 0 ? 'none' : 'auto';
        nextBtn.style.opacity = current === total - 1 ? '0.2' : '1';
        nextBtn.style.pointerEvents = current === total - 1 ? 'none' : 'auto';
      }

      // Keyboard
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') { e.preventDefault(); goTo(current + 1, 1); }
        if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') { e.preventDefault(); goTo(current - 1, -1); }
        if (e.key === 'Escape') { window.location.href = 'https://happyoperators.com'; }
      });

      // Dots
      dots.forEach(d => d.addEventListener('click', () => goTo(parseInt(d.dataset.index), parseInt(d.dataset.index) > current ? 1 : -1)));

      // Nav buttons
      prevBtn.addEventListener('click', () => goTo(current - 1, -1));
      nextBtn.addEventListener('click', () => goTo(current + 1, 1));

      // ─── TOUCH / SWIPE (rewritten for reliable mobile) ───
      let touchStartX = 0;
      let touchStartY = 0;
      let touchDeltaX = 0;
      let touchDeltaY = 0;
      let isSwiping = false;
      let swipeDecided = false;

      deck.addEventListener('touchstart', (e) => {
        if (transitioning) return;
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
        touchDeltaX = 0;
        touchDeltaY = 0;
        isSwiping = false;
        swipeDecided = false;
      }, { passive: true });

      deck.addEventListener('touchmove', (e) => {
        if (transitioning) return;
        touchDeltaX = e.touches[0].clientX - touchStartX;
        touchDeltaY = e.touches[0].clientY - touchStartY;

        // Decide swipe direction once movement exceeds 10px
        if (!swipeDecided && (Math.abs(touchDeltaX) > 10 || Math.abs(touchDeltaY) > 10)) {
          swipeDecided = true;
          isSwiping = Math.abs(touchDeltaX) > Math.abs(touchDeltaY);
        }

        // If horizontal swipe, prevent vertical scroll and show drag feedback
        if (isSwiping) {
          e.preventDefault();
          const activeSlide = slides[current];
          const clamped = Math.max(-120, Math.min(120, touchDeltaX));
          activeSlide.style.transform = `translateX(${clamped * 0.4}px)`;
          activeSlide.style.transition = 'none';
        }
        // If vertical, let native scroll happen within the slide
      }, { passive: false });

      deck.addEventListener('touchend', (e) => {
        const activeSlide = slides[current];
        // Reset inline transform
        activeSlide.style.transform = '';
        activeSlide.style.transition = '';

        if (isSwiping && Math.abs(touchDeltaX) > 50) {
          if (touchDeltaX < 0) goTo(current + 1, 1);
          else goTo(current - 1, -1);
        }

        isSwiping = false;
        swipeDecided = false;
      }, { passive: true });

      // ─── SCROLL / WHEEL (desktop only, or smart on mobile) ───
      if (!isTouch) {
        // Desktop: wheel navigates slides, but respects internal scroll
        let scrollTimeout;
        deck.addEventListener('wheel', (e) => {
          const activeSlide = slides[current];
          const scrollTop = activeSlide.scrollTop;
          const scrollHeight = activeSlide.scrollHeight;
          const clientHeight = activeSlide.clientHeight;
          const isScrollable = scrollHeight > clientHeight + 2;

          // If slide has scrollable content, only navigate at boundaries
          if (isScrollable) {
            const atTop = scrollTop <= 1;
            const atBottom = scrollTop + clientHeight >= scrollHeight - 1;
            if (e.deltaY > 0 && !atBottom) return; // let native scroll
            if (e.deltaY < 0 && !atTop) return;    // let native scroll
          }

          e.preventDefault();
          if (scrollTimeout) return;
          scrollTimeout = setTimeout(() => { scrollTimeout = null; }, 800);
          if (e.deltaY > 30) goTo(current + 1, 1);
          else if (e.deltaY < -30) goTo(current - 1, -1);
        }, { passive: false });
      }
      // On touch devices, no wheel listener — swipe handles navigation,
      // native vertical scroll handles overflow within slides.

      // Initial state
      updateUI();

      // Animate first slide in
      requestAnimationFrame(() => {
        slides[0].classList.add('deck__slide--intro');
      });
    }

    // ──────────────────────────────────────────
    // BOOT
    // ──────────────────────────────────────────
    checkAccess();
  </script>

  <style is:global>
    /* ═══════════════════════════════════════════
       PROPOSAL DECK — CINEMATIC DARK THEME
       ═══════════════════════════════════════════ */

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html, body {
      height: 100%;
      overflow: hidden;
      background: #050505;
      color: #FAFAFA;
      font-family: 'Geist Mono', 'JetBrains Mono', monospace;
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    #app { height: 100%; }

    /* ─── GRAIN TEXTURE ─── */
    .gate__grain,
    .deck__grain {
      position: fixed;
      inset: 0;
      z-index: 0;
      opacity: 0.03;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size: 256px;
    }

    /* ═══════════════════════════════════════════
       PASSWORD GATE
       ═══════════════════════════════════════════ */

    .gate {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      position: relative;
      background: #050505;
    }

    .gate__inner {
      text-align: center;
      position: relative;
      z-index: 1;
      max-width: 400px;
      padding: 0 2rem;
    }

    .gate__wordmark {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 0.875rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #4A4A4A;
      margin-bottom: 3rem;
    }

    .gate__lock {
      color: #3A3A3A;
      margin-bottom: 2rem;
    }

    .gate__title {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(1.5rem, 4vw, 2rem);
      font-weight: 500;
      line-height: 1.2;
      color: #FAFAFA;
      margin-bottom: 0.75rem;
    }

    .gate__sub {
      font-size: 0.8125rem;
      color: #6A6A6A;
      margin-bottom: 2.5rem;
      line-height: 1.6;
    }

    .gate__form {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .gate__input {
      width: 100%;
      padding: 0.875rem 1rem;
      font-family: 'Geist Mono', monospace;
      font-size: 0.875rem;
      color: #FAFAFA;
      background: #111111;
      border: 1px solid #2A2A2A;
      border-radius: 6px;
      outline: none;
      transition: border-color 0.2s ease;
      text-align: center;
      letter-spacing: 0.2em;
    }

    .gate__input:focus {
      border-color: #F26A3D;
    }

    .gate__input::placeholder {
      color: #4A4A4A;
      letter-spacing: 0.05em;
    }

    .gate__btn {
      padding: 0.875rem 1rem;
      font-family: 'Geist Mono', monospace;
      font-size: 0.8125rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #0A0A0A;
      background: #F26A3D;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .gate__btn:hover {
      background: #FF7A4D;
      transform: translateY(-1px);
    }

    .gate__error {
      font-size: 0.75rem;
      color: #F26A3D;
      margin-top: 0.75rem;
      height: 1em;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .gate__error--visible { opacity: 1; }

    .gate__link {
      font-size: 0.8125rem;
      color: #F26A3D;
      text-decoration: none;
    }

    .gate__footer {
      position: absolute;
      bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.6875rem;
      color: #3A3A3A;
      letter-spacing: 0.05em;
    }

    .gate__footer-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #F26A3D;
      opacity: 0.6;
    }

    /* ═══════════════════════════════════════════
       SLIDE DECK CHROME
       ═══════════════════════════════════════════ */

    .deck {
      height: 100%;
      width: 100%;
      position: relative;
      overflow: hidden;
      background: #050505;
    }

    .deck__watermark {
      position: fixed;
      bottom: 1.5rem;
      left: 2rem;
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 0.6875rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #2A2A2A;
      z-index: 10;
      pointer-events: none;
    }

    .deck__progress {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: #1A1A1A;
      z-index: 20;
    }

    .deck__progress-bar {
      height: 100%;
      background: #F26A3D;
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      width: 0%;
    }

    .deck__counter {
      position: fixed;
      bottom: 1.5rem;
      right: 2rem;
      font-size: 0.6875rem;
      color: #4A4A4A;
      z-index: 10;
      font-variant-numeric: tabular-nums;
    }

    .deck__counter-sep {
      margin: 0 0.15em;
      color: #2A2A2A;
    }

    .deck__dots {
      position: fixed;
      right: 2rem;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 10;
    }

    .deck__dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      border: 1px solid #3A3A3A;
      background: transparent;
      cursor: pointer;
      padding: 0;
      transition: all 0.3s ease;
    }

    .deck__dot:hover {
      border-color: #6A6A6A;
    }

    .deck__dot--active {
      background: #F26A3D;
      border-color: #F26A3D;
      transform: scale(1.25);
    }

    .deck__nav {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      background: none;
      border: 1px solid #2A2A2A;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #6A6A6A;
      transition: all 0.2s ease;
    }

    .deck__nav:hover {
      border-color: #F26A3D;
      color: #F26A3D;
    }

    .deck__nav--prev { left: 2rem; }
    .deck__nav--next { right: 4.5rem; }

    /* ═══════════════════════════════════════════
       SLIDE BASE & TRANSITIONS
       ═══════════════════════════════════════════ */

    .deck__slides {
      height: 100%;
      width: 100%;
      position: relative;
    }

    .deck__slide {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: translateX(0);
      transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      will-change: opacity, transform;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .deck__slide--active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .deck__slide--enter-right {
      opacity: 0;
      transform: translateX(60px);
    }

    .deck__slide--enter-left {
      opacity: 0;
      transform: translateX(-60px);
    }

    .deck__slide--exit-left {
      opacity: 0;
      transform: translateX(-60px);
    }

    .deck__slide--exit-right {
      opacity: 0;
      transform: translateX(60px);
    }

    /* Intro animation for first slide */
    .deck__slide--intro .slide__hero-title {
      animation: heroReveal 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
    }
    .deck__slide--intro .slide__hero-sub {
      animation: heroReveal 1s cubic-bezier(0.16, 1, 0.3, 1) 0.5s both;
    }
    .deck__slide--intro .slide__hero-line {
      animation: lineGrow 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.8s both;
    }

    @keyframes heroReveal {
      from { opacity: 0; transform: translateY(30px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes lineGrow {
      from { width: 0; opacity: 0; }
      to   { width: 60px; opacity: 1; }
    }

    /* ═══════════════════════════════════════════
       SLIDE CONTENT
       ═══════════════════════════════════════════ */

    .slide__content {
      max-width: 820px;
      width: 100%;
      padding: 4rem 6rem;
      position: relative;
    }

    .slide__content--center {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .slide__label {
      display: inline-block;
      font-family: 'Geist Mono', monospace;
      font-size: 0.6875rem;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: #F26A3D;
      margin-bottom: 1.5rem;
    }

    /* ─── TITLE SLIDE ─── */

    .slide__hero-title {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      font-weight: 500;
      line-height: 1.1;
      letter-spacing: -0.02em;
      color: #FAFAFA;
      margin-bottom: 1.25rem;
    }

    .slide__hero-sub {
      font-family: 'Geist Mono', monospace;
      font-size: clamp(0.8125rem, 1.5vw, 1rem);
      color: #6A6A6A;
      line-height: 1.6;
      max-width: 500px;
    }

    .slide__hero-line {
      width: 60px;
      height: 2px;
      background: #F26A3D;
      margin-top: 2.5rem;
    }

    /* ─── TEXT SLIDE ─── */

    .slide__title {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(1.75rem, 4vw, 2.75rem);
      font-weight: 500;
      line-height: 1.2;
      letter-spacing: -0.02em;
      color: #FAFAFA;
      margin-bottom: 1.5rem;
      white-space: pre-line;
    }

    .slide__subtitle {
      font-family: 'Geist Mono', monospace;
      font-size: 0.8125rem;
      color: #6A6A6A;
      margin-top: -1rem;
      margin-bottom: 1.5rem;
    }

    .slide__subtitle--badge {
      display: inline-block;
      background: rgba(242, 106, 61, 0.12);
      color: #F26A3D;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      font-size: 0.6875rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-top: -0.5rem;
      margin-bottom: 1.5rem;
    }

    .slide__body {
      font-size: 0.9375rem;
      line-height: 1.7;
      color: #A1A1A1;
      margin-bottom: 1.25rem;
      max-width: 600px;
    }

    .slide__content--center .slide__body {
      max-width: 540px;
    }

    .slide__note {
      font-size: 0.75rem;
      color: #4A4A4A;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid #1A1A1A;
    }

    .slide__note--accent {
      color: #F26A3D;
      font-weight: 600;
    }

    /* ─── CASE STUDY SLIDE ─── */

    .slide__cs-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 3rem;
      margin-bottom: 1.5rem;
    }

    .slide__metric {
      text-align: right;
      flex-shrink: 0;
    }

    .slide__metric-value {
      display: block;
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(3rem, 7vw, 5rem);
      font-weight: 600;
      line-height: 1;
      color: #F26A3D;
      letter-spacing: -0.03em;
    }

    .slide__metric-label {
      display: block;
      font-family: 'Geist Mono', monospace;
      font-size: 0.6875rem;
      color: #6A6A6A;
      margin-top: 0.5rem;
      letter-spacing: 0.05em;
    }

    .slide__quote {
      margin-top: 2rem;
      padding: 1.75rem 0 0;
      border-top: 1px solid #1A1A1A;
    }

    .slide__quote-text {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(1.125rem, 2.5vw, 1.5rem);
      font-style: italic;
      font-weight: 400;
      line-height: 1.5;
      color: #FAFAFA;
      margin-bottom: 1rem;
    }

    .slide__quote-attr {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .slide__quote-author {
      font-size: 0.8125rem;
      font-weight: 600;
      color: #FAFAFA;
    }

    .slide__quote-role {
      font-size: 0.75rem;
      color: #4A4A4A;
    }

    /* ─── FEATURES SLIDE ─── */

    .slide__bullets {
      list-style: none;
      margin: 1.25rem 0;
    }

    .slide__bullet {
      display: flex;
      align-items: flex-start;
      gap: 0.875rem;
      font-size: 0.9375rem;
      color: #A1A1A1;
      line-height: 1.6;
      padding: 0.625rem 0;
      border-bottom: 1px solid #141414;
    }

    .slide__bullet:last-child { border-bottom: none; }

    .slide__bullet-marker {
      flex-shrink: 0;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #F26A3D;
      margin-top: 0.55rem;
    }

    .slide__bullets--compact .slide__bullet {
      padding: 0.4rem 0;
      font-size: 0.875rem;
    }

    /* ─── PRICING TABLE ─── */

    .slide__table-wrap {
      margin: 1.5rem 0;
      overflow-x: auto;
    }

    .slide__table {
      width: 100%;
      border-collapse: collapse;
    }

    .slide__table tr {
      border-bottom: 1px solid #1A1A1A;
    }

    .slide__table-cell {
      padding: 0.875rem 0;
      font-size: 0.875rem;
      vertical-align: middle;
    }

    .slide__table-cell--label {
      color: #A1A1A1;
      padding-right: 2rem;
    }

    .slide__table-cell--value {
      color: #FAFAFA;
      text-align: right;
      font-variant-numeric: tabular-nums;
      min-width: 100px;
    }

    .slide__table-row--highlight {
      border-bottom: none;
    }

    .slide__table-row--highlight .slide__table-cell {
      padding-top: 1.25rem;
      padding-bottom: 0.5rem;
      font-weight: 600;
    }

    .slide__table-row--highlight .slide__table-cell--label {
      color: #FAFAFA;
    }

    .slide__table-row--highlight .slide__table-cell--value {
      color: #F26A3D;
      font-size: 1rem;
    }

    /* ─── COMPARISON SLIDE ─── */

    .slide__columns {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 2rem;
    }

    .slide__column {
      padding: 1.75rem;
      border: 1px solid #1A1A1A;
      border-radius: 8px;
      position: relative;
      transition: border-color 0.3s ease;
    }

    .slide__column:hover {
      border-color: #2A2A2A;
    }

    .slide__column--rec {
      border-color: #F26A3D;
      background: rgba(242, 106, 61, 0.04);
    }

    .slide__column--rec:hover {
      border-color: #F26A3D;
    }

    .slide__column-badge {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      background: #F26A3D;
      color: #0A0A0A;
      font-size: 0.5625rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      white-space: nowrap;
    }

    .slide__column-title {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 1.25rem;
      font-weight: 500;
      color: #FAFAFA;
      margin-bottom: 0.5rem;
    }

    .slide__column-price {
      font-size: 0.8125rem;
      color: #F26A3D;
      font-weight: 600;
      margin-bottom: 1.25rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #1A1A1A;
    }

    .slide__column-features {
      list-style: none;
    }

    .slide__column-features li {
      font-size: 0.75rem;
      color: #6A6A6A;
      line-height: 1.6;
      padding: 0.3rem 0;
    }

    .slide__column--rec .slide__column-features li {
      color: #A1A1A1;
    }

    /* ─── FULL-BLEED IMAGE SLIDE ─── */

    .deck__slide--image {
      align-items: stretch;
      justify-content: stretch;
    }

    .slide__image-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-color: #0A0A0A;
    }

    .slide__image-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(5,5,5,0.15) 0%, rgba(5,5,5,0.5) 100%);
    }

    .slide__image-caption {
      position: absolute;
      bottom: 3rem;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Geist Mono', monospace;
      font-size: 0.6875rem;
      color: rgba(250,250,250,0.6);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      z-index: 1;
    }

    /* ─── BACKGROUND IMAGE (on any slide) ─── */

    .slide__bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-color: #0A0A0A;
    }

    .slide__bg-overlay {
      position: absolute;
      inset: 0;
      background: rgba(5, 5, 5, 0.85);
    }

    .deck__slide--has-bg .slide__content {
      position: relative;
      z-index: 1;
    }

    /* ─── AVATARS (testimonial photos) ─── */

    .slide__avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #1A1A1A;
      flex-shrink: 0;
      background: #0A0A0A;
    }

    .slide__quote-attr {
      flex-direction: row;
      align-items: center;
    }

    .slide__quote-attr-text {
      display: flex;
      flex-direction: column;
      gap: 0.125rem;
    }

    /* ─── SCREENSHOTS ─── */

    .slide__screenshots {
      margin: 1.5rem 0;
      display: flex;
      gap: 1rem;
    }

    .slide__screenshot {
      max-width: 100%;
      max-height: 180px;
      border-radius: 8px;
      border: 1px solid #1A1A1A;
      object-fit: cover;
      background: #0A0A0A;
    }

    /* ─── LOGO WALL ─── */

    .slide__logo-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 3rem;
      margin-top: 3rem;
    }

    .slide__logo-item {
      width: 140px;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide__logo-item img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      filter: grayscale(100%) brightness(1.8);
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .slide__logo-item img:hover {
      filter: grayscale(0%) brightness(1);
      opacity: 1;
    }

    /* ─── CTA SLIDE ─── */

    .slide__cta-title {
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 500;
      line-height: 1.1;
      color: #FAFAFA;
      margin-bottom: 1.5rem;
    }

    .slide__cta-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .slide__cta-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 1rem 2.5rem;
      font-family: 'Geist Mono', monospace;
      font-size: 0.8125rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #0A0A0A;
      background: #F26A3D;
      border: none;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.25s ease;
    }

    .slide__cta-btn:hover {
      background: #FF7A4D;
      transform: translateY(-2px);
      text-decoration: none;
      color: #0A0A0A;
    }

    .slide__cta-email {
      font-size: 0.8125rem;
      color: #6A6A6A;
      text-decoration: none;
      transition: color 0.2s;
    }

    .slide__cta-email:hover {
      color: #F26A3D;
      text-decoration: none;
    }

    /* ═══════════════════════════════════════════
       RESPONSIVE
       ═══════════════════════════════════════════ */

    @media (max-width: 768px) {
      html, body {
        overflow: hidden;
        height: 100%;
        /* Keep hidden on mobile — slides handle their own scroll */
      }

      .deck__slide {
        align-items: flex-start;
      }

      .slide__content {
        padding: 3rem 2rem 5rem;
        /* Extra bottom padding for scroll clearance above nav */
      }

      .deck__dots { display: none; }

      /* Nav buttons — 44x44px minimum tap target per Apple HIG */
      .deck__nav {
        width: 44px;
        height: 44px;
        border: none;
        background: rgba(10, 10, 10, 0.6);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
      }
      .deck__nav--prev { left: 0.5rem; }
      .deck__nav--next { right: 0.5rem; }

      .deck__watermark { left: 1rem; bottom: 1rem; font-size: 0.5625rem; }
      .deck__counter { right: 1rem; bottom: 1rem; }

      .slide__cs-header {
        flex-direction: column;
        gap: 1.25rem;
      }

      .slide__metric { text-align: left; }

      .slide__columns {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .slide__column-badge {
        position: static;
        transform: none;
        display: inline-block;
        margin-bottom: 0.75rem;
      }

      .slide__hero-title {
        font-size: clamp(2rem, 8vw, 3rem);
      }

      .slide__cta-title {
        font-size: clamp(2rem, 8vw, 3rem);
      }

      /* Ensure body text is at least 14px on mobile */
      .slide__body { font-size: 0.9375rem; line-height: 1.7; }
      .slide__bullet { font-size: 0.875rem; }

      /* Avatar smaller on mobile */
      .slide__avatar { width: 44px; height: 44px; }

      /* Screenshots stack */
      .slide__screenshots { flex-direction: column; }
      .slide__screenshot { max-height: 150px; }

      /* Logo grid */
      .slide__logo-grid { gap: 2rem; margin-top: 2rem; }
      .slide__logo-item { width: 110px; height: 55px; }
      .slide__logo-item img { opacity: 0.6; }
    }

    @media (max-width: 480px) {
      .slide__content { padding: 2.5rem 1.25rem 4.5rem; }
      .slide__body { font-size: 0.875rem; }
      .slide__bullet { font-size: 0.8125rem; }
      .slide__table-cell { font-size: 0.8125rem; padding: 0.625rem 0; }
      .slide__table-cell--value { min-width: 70px; }
      .slide__title { font-size: clamp(1.5rem, 6vw, 2rem); }
      .slide__metric-value { font-size: clamp(2.5rem, 12vw, 4rem); }
    }

    /* ─── Phone landscape ─── */
    @media (orientation: landscape) and (max-height: 500px) {
      .deck__slide {
        align-items: flex-start;
      }

      .slide__content {
        padding: 1.5rem 3rem 2rem;
        max-width: 900px;
      }

      .slide__content--center {
        padding-top: 1.5rem;
      }

      /* Shrink typography ~30% for landscape */
      .slide__hero-title { font-size: clamp(1.5rem, 5vw, 2.5rem); margin-bottom: 0.75rem; }
      .slide__hero-sub { font-size: 0.75rem; }
      .slide__hero-line { margin-top: 1rem; }
      .slide__title { font-size: clamp(1.25rem, 3.5vw, 1.75rem); margin-bottom: 0.75rem; }
      .slide__cta-title { font-size: clamp(1.5rem, 5vw, 2.5rem); margin-bottom: 0.75rem; }
      .slide__body { font-size: 0.8125rem; line-height: 1.6; margin-bottom: 0.75rem; }
      .slide__label { margin-bottom: 0.75rem; font-size: 0.625rem; }
      .slide__note { margin-top: 1rem; padding-top: 0.75rem; }
      .slide__bullet { padding: 0.375rem 0; font-size: 0.8125rem; }
      .slide__metric-value { font-size: clamp(2rem, 6vw, 3rem); }
      .slide__metric-label { font-size: 0.625rem; }
      .slide__quote { margin-top: 1rem; padding-top: 1rem; }
      .slide__quote-text { font-size: 1rem; }

      /* Columns side-by-side with horizontal scroll */
      .slide__columns {
        display: flex;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        gap: 0.75rem;
        margin-top: 1rem;
        padding-bottom: 0.5rem;
        -webkit-overflow-scrolling: touch;
      }

      .slide__column {
        flex: 0 0 70%;
        scroll-snap-align: start;
        padding: 1.25rem;
      }

      /* Pricing table compact */
      .slide__table-cell { padding: 0.5rem 0; font-size: 0.75rem; }
      .slide__subtitle--badge { margin-top: -0.25rem; margin-bottom: 0.75rem; }

      /* Move dots to bottom-center horizontal */
      .deck__dots {
        display: flex;
        flex-direction: row;
        position: fixed;
        right: auto;
        top: auto;
        bottom: 0.5rem;
        left: 50%;
        transform: translateX(-50%);
        gap: 6px;
      }

      .deck__dot { width: 6px; height: 6px; }

      /* Nav buttons */
      .deck__nav {
        width: 36px;
        height: 36px;
        top: 50%;
      }
      .deck__nav--prev { left: 0.5rem; }
      .deck__nav--next { right: 0.5rem; }

      .deck__watermark { bottom: 0.5rem; left: 0.75rem; font-size: 0.5rem; }
      .deck__counter { bottom: 0.5rem; right: 0.75rem; font-size: 0.5625rem; }

      /* CTA actions more compact */
      .slide__cta-actions { margin-top: 1rem; gap: 0.5rem; }
      .slide__cta-btn { padding: 0.75rem 2rem; font-size: 0.75rem; }

      /* Avatar, screenshots, logos compact in landscape */
      .slide__avatar { width: 40px; height: 40px; }
      .slide__screenshots { margin: 0.75rem 0; }
      .slide__screenshot { max-height: 120px; }
      .slide__logo-grid { gap: 1.5rem; margin-top: 1.5rem; }
      .slide__logo-item { width: 100px; height: 50px; }
      .slide__logo-item img { opacity: 0.6; }
    }

    /* ─── Reduced motion ─── */
    @media (prefers-reduced-motion: reduce) {
      .deck__slide { transition: opacity 0.2s ease; }
      .deck__slide--enter-right,
      .deck__slide--enter-left { transform: none; }
      .deck__slide--exit-left,
      .deck__slide--exit-right { transform: none; }
      .deck__progress-bar { transition: none; }
      .slide__hero-title,
      .slide__hero-sub,
      .slide__hero-line { animation: none; opacity: 1; }
    }
  </style>
</body>
</html>
