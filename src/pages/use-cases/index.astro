---
import BaseLayout from '../../layouts/BaseLayout.astro';
import UseCaseCard from '../../components/UseCaseCard.astro';
import CTASection from '../../components/CTASection.astro';
import { getCollection } from 'astro:content';

const allUseCases = await getCollection('useCases');

const sortedUseCases = allUseCases.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Get unique categories
const categories = [...new Set(allUseCases.map(uc => uc.data.category))];
---

<BaseLayout
  title="Use Cases"
  description="Practical examples where AI and automation can improve your workflow. Explore real-world applications for HR, Sales, Marketing, and Customer Support."
>
  <div class="container">
    <header class="page-header">
      <span class="page-header__label">[USE CASES]</span>
      <h1 class="page-header__title">Use Cases</h1>
      <p class="page-header__subtitle">
        Practical examples where AI and automation can improve your workflow
      </p>
    </header>

    <hr />

    <nav class="category-nav">
      <a href="#all" class="category-nav__item category-nav__item--active">All</a>
      {categories.map((category) => (
        <a href={`#${category.toLowerCase().replace(' ', '-')}`} class="category-nav__item">
          {category}
        </a>
      ))}
    </nav>

    <section class="use-cases-grid">
      {sortedUseCases.map((useCase) => (
        <UseCaseCard useCase={useCase} />
      ))}
    </section>

    {sortedUseCases.length === 0 && (
      <p class="empty-state">No use cases yet. Check back soon!</p>
    )}
  </div>

  <CTASection
    headline="Ready to automate your workflows?"
    description="Book a free discovery call to explore how we can help your team."
    ctaText="Get Started"
    ctaHref="/contact"
    variant="centered"
  />
</BaseLayout>

<style>
  .page-header {
    padding: var(--space-2xl) 0;
    text-align: center;
  }

  .page-header__label {
    display: block;
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--color-accent-primary);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    margin-bottom: var(--space-md);
  }

  .page-header__title {
    font-size: var(--text-4xl);
    margin-bottom: var(--space-md);
  }

  .page-header__subtitle {
    font-size: var(--text-lg);
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto;
  }

  .category-nav {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    justify-content: center;
    margin-bottom: var(--space-3xl);
    padding: var(--space-lg) 0;
  }

  .category-nav__item {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    transition: all var(--transition-fast);
  }

  .category-nav__item:hover,
  .category-nav__item--active {
    border-color: var(--color-accent-primary);
    color: var(--color-accent-primary);
    text-decoration: none;
  }

  .use-cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--space-xl);
    padding-bottom: var(--space-4xl);
  }

  .empty-state {
    text-align: center;
    padding: var(--space-4xl) 0;
    color: var(--color-text-muted);
  }
</style>
